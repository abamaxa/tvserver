(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[614],{6276:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/VideoControlPage",function(){return s(7498)}])},7498:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return l}});var n=s(5893),o=s(7294),i=s(9380),c=s(5697);class r{constructor(e,t){if(this.socket=void 0,this.open=!1,this.listening=!1,this.onMessage=void 0,this.addListeners=()=>{if(void 0!==this.socket&&!this.listening){this.listening=!0;let e=this;this.socket.addEventListener("open",t=>{console.log("open websocket event"),void 0!==e.socket&&e.socket.send("Hello Server!"),e.open=!0}),this.socket.addEventListener("message",function(t){e.onReceive(t).catch(e=>(0,i.hV)("onReceive exception: ".concat(e)))})}},this.close=(e,t)=>{void 0!==this.socket&&(this.socket.close(e,t),this.socket=void 0,this.open=!1,this.listening=!1)},this.send=e=>{void 0!==this.socket&&this.open&&this.socket.send(e)},this.onReceive=async e=>{if(void 0!==this.socket&&this.open&&void 0!==this.onMessage){if(e.data instanceof c.string)(0,i.hV)(e.data);else{let t=await new Response(e.data).text();(0,i.hV)("onReceive: ".concat(t));let s=JSON.parse(t);this.onMessage(s)}}},this.isReady=()=>void 0!==this.socket&&this.open,r._instance)return r._instance;r._instance=this,r.socketBuilder=e,this.onMessage=t,this.socket=e(),this.addListeners()}}let a=e=>{let[t,s]=(0,o.useState)(""),c=(0,o.useRef)(null);(0,o.useEffect)(()=>{new r(()=>new WebSocket("ws://".concat(e.host.getHost(),"/ws")),t=>{if(void 0!==t.Play){let n="http://".concat(e.host.getHost()).concat(t.Play.url);s(n)}else if(void 0!==t.Seek&&null!==c){let e=c.current;e.currentTime=e.currentTime+t.Seek.interval}else if(void 0!==t.TogglePause&&null!==c){let e=c.current;e.paused?e.play().catch(e=>{(0,i.FO)(e.message)}):e.pause()}})},[e.host]);let a=e=>{let t=e.currentTarget;t.requestFullscreen().then(e=>(0,i.hV)("requestFullscreen: ".concat(e))).catch(e=>(0,i.tu)("failed: ".concat(e))),t.className="w-full"},l=e=>{(0,i.hV)("getNextVideo called")};return""!=t?(0,n.jsx)("div",{className:"bg-black h-screen w-screen",children:(0,n.jsx)("video",{className:"h-screen m-auto",onLoadedMetadata:e=>a(e),onEnded:e=>l(e),style:{objectFit:"contain"},id:"video",autoPlay:!0,controls:!0,muted:!1,playsInline:!1,src:t,ref:c})}):(0,n.jsx)("p",{children:"Waiting for video to be selected"})};var l=a},9380:function(e,t,s){"use strict";s.d(t,{FO:function(){return l},hV:function(){return a},hu:function(){return c},tu:function(){return u}});let n="error";class o{constructor(e){this.log=(e,t)=>{this.log_messages(e,[t])},this.log_messages=(e,t)=>{this.host.post("log",{level:e,messages:t}).catch(e=>{console.error(e)})},this.host=e}}let i=null,c=e=>{i=new o(e)},r=(e,t)=>{let s=e===n?console.error:console.log;null===i?s("NO LOGGER: ".concat(e," - ").concat(t)):(s("".concat(e," - ").concat(t)),i.log(e,t))},a=e=>{r("info",e)},l=e=>{r("warning",e),alert(e)},u=e=>{let t=Error().stack,s=JSON.stringify(e);if(void 0===t||null==i)r(n,e);else{let e=t.split("\n");i.log_messages(n,[s,...e])}alert(e)}},2703:function(e,t,s){"use strict";var n=s(414);function o(){}function i(){}i.resetWarningCache=o,e.exports=function(){function e(e,t,s,o,i,c){if(c!==n){var r=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw r.name="Invariant Violation",r}}function t(){return e}e.isRequired=e;var s={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:o};return s.PropTypes=s,s}},5697:function(e,t,s){e.exports=s(2703)()},414:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}},function(e){e.O(0,[774,888,179],function(){return e(e.s=6276)}),_N_E=e.O()}]);