(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(1771)}])},7498:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return c}});var r=s(5893),l=s(7294),n=s(9380),o=s(5697);class i{constructor(e,t){if(this.socket=void 0,this.open=!1,this.listening=!1,this.onMessage=void 0,this.addListeners=()=>{if(void 0!==this.socket&&!this.listening){this.listening=!0;let e=this;this.socket.addEventListener("open",t=>{console.log("open websocket event"),void 0!==e.socket&&e.socket.send("Hello Server!"),e.open=!0}),this.socket.addEventListener("message",function(t){e.onReceive(t).catch(e=>(0,n.hV)("onReceive exception: ".concat(e)))})}},this.close=(e,t)=>{void 0!==this.socket&&(this.socket.close(e,t),this.socket=void 0,this.open=!1,this.listening=!1)},this.send=e=>{void 0!==this.socket&&this.open&&this.socket.send(e)},this.onReceive=async e=>{if(void 0!==this.socket&&this.open&&void 0!==this.onMessage){if(e.data instanceof o.string)(0,n.hV)(e.data);else{let t=await new Response(e.data).text();(0,n.hV)("onReceive: ".concat(t));let s=JSON.parse(t);this.onMessage(s)}}},this.isReady=()=>void 0!==this.socket&&this.open,i._instance)return i._instance;i._instance=this,i.socketBuilder=e,this.onMessage=t,this.socket=e(),this.addListeners()}}let a=e=>{let[t,s]=(0,l.useState)(""),o=(0,l.useRef)(null);(0,l.useEffect)(()=>{let t=e.host.getHost()?e.host.getHost():location.host;new i(()=>new WebSocket("ws://".concat(t,"/ws")),e=>{if(void 0!==e.Play)s(e.Play.url);else if(void 0!==e.Seek&&null!==o){let t=o.current;t.currentTime=t.currentTime+e.Seek.interval}else if(void 0!==e.TogglePause&&null!==o){let e=o.current;e.paused?e.play().catch(e=>{(0,n.FO)(e.message)}):e.pause()}})},[e.host]);let a=e=>{let t=e.currentTarget;t.requestFullscreen().then(e=>(0,n.hV)("requestFullscreen: ".concat(e))).catch(e=>(0,n.hV)("failed: ".concat(e))),t.className="w-full"},c=e=>{(0,n.hV)("getNextVideo called")};return""!=t?(0,r.jsx)("div",{className:"bg-black h-screen w-screen",children:(0,r.jsx)("video",{className:"h-screen m-auto",onLoadedMetadata:e=>a(e),onEnded:e=>c(e),style:{objectFit:"contain"},id:"video",autoPlay:!0,controls:!0,muted:!1,playsInline:!1,src:t,ref:o})}):(0,r.jsx)("p",{children:"Waiting for video to be selected"})};var c=a},1771:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return I}});var r,l,n,o,i=s(5893),a=s(7498),c=s(9380),h=s(7294),d=s(765);class u{constructor(e,t){this.remote_address="",this.message=e,void 0!==t&&(this.remote_address=t)}}class x{constructor(){this.collection="",this.parent_collection="",this.child_collections=[],this.videos=[],this.errors=[]}}(r=n||(n={})).YouTube="youtube",r.PirateBay="piratebay";let m="text-sm font-medium text-gray-900 border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",g="w-full px-4 py-2 border-gray-200 dark:border-gray-600 overflow-hidden",f="piratebay",p=e=>{let t=e=>{let t=g;return e||(t+=" border-b"),t},s=e.entry.child_collections.length-1,r=e.entry.videos.length-1,l=(()=>{let s=t(!1),r=e.entry.parent_collection;return""===e.entry.collection?(0,i.jsx)(i.Fragment,{}):(0,i.jsxs)("li",{className:s,onClick:()=>e.setCurrentCollection(r),children:["<-"," Back"]},"0")})(),n=e.entry.child_collections.map((l,n)=>{let o=t(n==s&&r<0);return(0,i.jsx)("li",{className:o,onClick:()=>e.setCurrentCollection(l),children:l},l)}),o=e.entry.videos.map((s,l)=>{let n=t(l==r)+" text-gray-600";return(0,i.jsx)("li",{className:n,onClick:()=>{e.playVideo(s),console.log(s)},children:s},s)});return(0,i.jsxs)("ul",{className:m,children:[l,n,o]})},y=e=>{let[t,s]=(0,h.useState)(new x),[r,l]=(0,h.useState)("");return(0,h.useEffect)(()=>{let t=async()=>{try{let t=await e.videoPlayer.fetchCollection();s(t),l(t.parent_collection)}catch(e){(0,c.tu)(e)}};t()},[e.videoPlayer.getCurrentCollection,e.videoPlayer]),(0,i.jsx)("div",{className:"flex min-h-full flex-col items-center justify-center p-0",children:(0,i.jsx)("main",{className:"flex w-full flex-1 flex-col items-left justify-left",children:(0,i.jsx)(p,{entry:t,setCurrentCollection:e.videoPlayer.setCurrentCollection,playVideo:e.videoPlayer.playVideo})})})},k=e=>{let[t,s]=(0,h.useState)(f),r=e=>{let t=e.currentTarget;s(t.value)},l=s=>{let r=document.getElementById("search-term");null!==r&&e.doSearch(r.value,t),s.preventDefault()};return(0,i.jsxs)("form",{className:"items-center",onSubmit:e=>l(e),children:[(0,i.jsxs)("div",{className:"flex w-full",children:[(0,i.jsx)("label",{htmlFor:"simple-search",className:"sr-only",children:"SearchTab"}),(0,i.jsxs)("div",{className:"relative w-full",children:[(0,i.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,i.jsx)("svg",{"aria-hidden":"true",className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),(0,i.jsx)("input",{type:"text",id:"search-term",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"SearchTab",required:!0})]}),(0,i.jsxs)("button",{type:"submit",className:"p-2.5 ml-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[(0,i.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,i.jsx)("span",{className:"sr-only",children:"SearchTab"})]})]}),(0,i.jsxs)("div",{className:"flex gap-4 pt-4 px-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(d.Y8,{id:"piratebay",name:"engine",value:f,defaultChecked:!0,onChange:r}),(0,i.jsx)(d.__,{htmlFor:"piratebay",children:"PirateBay"})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)(d.Y8,{id:"youtube",name:"engine",value:"youtube",onChange:r}),(0,i.jsx)(d.__,{htmlFor:"youtube",children:"YouTube"})]})]})]})},j=m+" mt-4",v=e=>{let t=e.results.map((t,s,r)=>{let l=g;return s!=r.length-1&&(l+=" border-b"),(0,i.jsxs)("li",{className:l,onClick:s=>e.onItemClick(t),children:[(0,i.jsx)("p",{children:t.title}),(0,i.jsx)("p",{className:"text-gray-600 text-xs",children:t.description})]},"search:"+s)});return 0==e.results.length?(0,i.jsx)("p",{className:"px-1 py-2",children:"No results"}):(0,i.jsx)("ul",{className:j,children:t})};var w=s(9116);class b{async query(e,t){try{let s=await this.host.get(this.url+e);null!==s.results?t(s.results):null!==s.error&&(0,w.w8)(s.error)}catch(e){(0,c.tu)(e)}}constructor(e,t){this.host=e,this.url=t}}class N extends b{constructor(e){super(e,"search/pirate?q=")}}class C extends b{constructor(e){super(e,"search/youtube?q=")}}class _{async list(e){try{let t=await this.host.get("downloads/list");null!==t.results?e(t.results):null!==t.error&&(0,c.FO)(t.error)}catch(e){(0,c.tu)(e)}}async add(e){try{await this.host.post("downloads/add",{link:e.link,engine:e.engine})}catch(e){(0,c.tu)(e)}}async delete(e){try{await this.host.delete("downloads/delete/"+e)}catch(e){(0,c.tu)(e)}}constructor(e){this.host=e}}let S=e=>{let[t,s]=(0,h.useState)([]),r=t=>{(0,w.LK)("Download ".concat(t.title,"?"),()=>{let s=new _(e.host);s.add(t)})},l=(t,r)=>{let l;switch(r){case"piratebay":l=new N(e.host);break;case"youtube":l=new C(e.host);break;default:(0,c.tu)("unknown search engine ".concat(r));return}l.query(t,s)};return(0,i.jsxs)("div",{className:"p-0",children:[(0,i.jsx)(k,{doSearch:l}),(0,i.jsx)(v,{results:t,onItemClick:r})]})},E=e=>{let[t,s]=(0,h.useState)([]);(0,h.useEffect)(()=>{if(e.isActive){let t=new _(e.host);t.list(s);let r=setInterval(async()=>{await t.list(s)},2e3);return()=>clearInterval(r)}},[e.isActive,e.host]);let r=e=>{console.log("onItemClick: ".concat(e))};return(0,i.jsx)("div",{className:"p-0",children:(0,i.jsx)(L,{results:t,onItemClick:r})})},L=e=>{let t=(e,t)=>{console.log("onItemClick: ".concat(e,", ").concat(t))},s=e.results.map((e,s,r)=>{let l=g;return s!=r.length-1&&(l+=" border-b"),(0,i.jsxs)("li",{className:l,onClick:s=>t(e,s),children:[(0,i.jsx)("p",{children:e.name}),(0,i.jsxs)("p",{className:"text-gray-600 text-xs",children:["Size: ",e.downloadedSize,"/",e.totalSize,"\xa0 Eta: ",e.eta," secs (",(100*e.percentDone).toFixed(2),"%)\xa0"]}),(0,i.jsxs)("p",{className:"text-gray-600 text-xs",children:["Rate: ",e.rateDownload,"/",e.rateUpload,"\xa0 Peers: ",e.peersConnected," (",e.peersSendingToUs,"/",e.peersGettingFromUs,")"]})]},"search:"+s)});return 0==e.results.length?(0,i.jsx)("p",{className:"px-1 py-2",children:"No results"}):(0,i.jsx)("ul",{className:m,children:s})};var V=s(3854);let P=e=>(0,i.jsx)("button",{type:"button",className:"bg-white border rounded-full","aria-label":"Rewind 10 seconds",onClick:()=>e.onClick(),children:(0,i.jsx)("svg",{width:"72px",viewBox:"-6 -6 36 36",children:e.children})}),R=e=>{let t=e.player;return(0,i.jsxs)("footer",{className:"flex h-28 w-full items-center justify-center border-t bg-gray-50",children:[(0,i.jsx)("div",{className:"flex-auto flex items-center justify-evenly",children:(0,i.jsxs)(P,{ariaLabel:"Rewind 10 seconds",onClick:()=>t.seek(-15),children:[(0,i.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fillOpacity:"0.0",d:"M6.492 16.95c2.861 2.733 7.5 2.733 10.362 0 2.861-2.734 2.861-7.166 0-9.9-2.862-2.733-7.501-2.733-10.362 0A7.096 7.096 0 0 0 5.5 8.226",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M5 5v3.111c0 .491.398.889.889.889H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,i.jsx)("button",{type:"button",onClick:()=>t.togglePause(),className:"bg-white text-slate-900 dark:bg-slate-100 dark:text-slate-700 flex-none -my-2 mx-auto w-20 h-20 rounded-full ring-1 ring-slate-900/5 shadow-md flex items-center justify-center","aria-label":"Pause",children:(0,i.jsxs)("svg",{width:"30",height:"32",fill:"currentColor",children:[(0,i.jsx)("rect",{x:"6",y:"4",width:"4",height:"24",rx:"2"}),(0,i.jsx)("rect",{x:"20",y:"4",width:"4",height:"24",rx:"2"})]})}),(0,i.jsx)("div",{className:"flex-auto flex items-center justify-evenly",children:(0,i.jsxs)(P,{ariaLabel:"Skip 10 seconds",onClick:()=>t.seek(15),children:[(0,i.jsx)("path",{fillOpacity:"0.0",d:"M17.509 16.95c-2.862 2.733-7.501 2.733-10.363 0-2.861-2.734-2.861-7.166 0-9.9 2.862-2.733 7.501-2.733 10.363 0 .38.365.711.759.991 1.176",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,i.jsx)("path",{d:"M19 5v3.111c0 .491-.398.889-.889.889H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})};class O{constructor(e,t,s,r){this.setCurrentCollection=e=>{this.setCurrentCollectionHook(e)},this.getCurrentCollection=()=>this.currentCollection,this.playVideo=e=>{let t={remote_address:this.remote_address,collection:this.currentCollection,video:e};this.post("remote-play",t)},this.seek=e=>{let t=new u({Seek:{interval:e}});this.post("remote-control",t)},this.togglePause=()=>{let e=new u({TogglePause:"ok"});this.post("remote-control",e)},this.post=(e,t)=>{this.host.post(e,t).then(e=>e.json()).then(e=>{console.log(e)}).catch(e=>{(0,c.tu)(e)})},this.fetchCollection=async()=>{let e=this.currentCollection?"videos/"+this.currentCollection:"collections";return await this.host.get(e)},this.currentCollection=e,this.host=s,this.remote_address=r,this.setCurrentCollectionHook=t}}let T=e=>{let[t,s]=(0,h.useState)(""),[r,l]=(0,h.useState)(0),[n,o]=(0,h.useState)(!1),a=new O(t,s,e.host,""),c=(()=>{switch(r){case 1:return(0,i.jsx)(S,{host:e.host});case 2:return(0,i.jsx)(E,{host:e.host,isActive:!0});default:return(0,i.jsx)(y,{host:e.host,videoPlayer:a})}})();return w.No.setStateFunction(o),(0,i.jsxs)("div",{className:"flex flex-col h-screen justify-between w-full",children:[(0,i.jsx)(w.bZ,{show:n}),(0,i.jsxs)(d.zx.Group,{className:"p-1 w-full",children:[(0,i.jsxs)(d.zx,{color:"gray",className:"w-full",onClick:()=>l(0),children:[(0,i.jsx)(V.$In,{className:"mr-2 h-4 w-4"})," ","Play"]}),(0,i.jsxs)(d.zx,{color:"gray",className:"w-full",onClick:()=>l(1),children:[(0,i.jsx)(V.G4C,{className:"mr-2 h-4 w-4"})," ","Find"]}),(0,i.jsxs)(d.zx,{color:"gray",className:"w-full",onClick:()=>l(2),children:[(0,i.jsx)(V.EKd,{className:"mr-2 h-4 w-4"})," ","..."]})]}),(0,i.jsx)("div",{className:"mb-auto p-1 overflow-y-auto",children:c}),(0,i.jsx)(R,{player:a})]})},A=new class{constructor(e){this.getHost=()=>void 0!==this.host?this.host:null,this.get=async e=>{let t=await fetch(this.makeUrl(e));return await t.json()},this.post=async(e,t)=>{let s={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};return fetch(this.makeUrl(e),s)},this.delete=async e=>fetch(this.makeUrl(e),{method:"DELETE"}),this.makeUrl=e=>void 0!==this.host?"http://".concat(this.host,"/").concat(e):"/".concat(e),this.host=e}};(0,c.hu)(A),(l=o||(o={}))[l.Unknown=1]="Unknown",l[l.Video=2]="Video",l[l.Remote=3]="Remote";let F=()=>{let[e,t]=(0,h.useState)(o.Unknown);return((0,h.useEffect)(()=>{let e=window.navigator.userAgent;e.includes("SMART-TV")||e.includes("Firefox/110")?t(o.Video):t(o.Remote)},[]),e==o.Video)?(0,i.jsx)(a.default,{host:A}):e==o.Remote?(0,i.jsx)(T,{host:A}):(0,i.jsx)("p",{children:"Loading..."})};var I=F},9116:function(e,t,s){"use strict";s.d(t,{LK:function(){return x},No:function(){return c},av:function(){return d},bZ:function(){return g},jx:function(){return h},w8:function(){return u}});var r,l,n=s(5893),o=s(765),i=s(3854),a=s(9380);(r=l||(l={}))[r.Error=0]="Error",r[r.Information=1]="Information",r[r.Warning=2]="Warning",r[r.Question=3]="Question";let c=new class{constructor(){this.message="",this.show=!1,this.type=l.Information,this.setStateFunction=e=>{this.setAlertVisible=e},this.showAlert=(e,t,s)=>{this.type=t,this.show=!0,this.onOk=s,this.message=(0,a.HG)(e),void 0!==this.setAlertVisible&&this.setAlertVisible(!0)},this.hideAlert=()=>{this.show=!1,void 0!==this.setAlertVisible&&this.setAlertVisible(!1)},this.okClicked=()=>{void 0!==this.onOk&&(this.onOk(),this.onOk=void 0),this.hideAlert()}}},h=e=>{m(e,l.Error)},d=e=>{m(e,l.Warning)},u=e=>{m(e,l.Information)},x=(e,t)=>{m(e,l.Question,t)},m=(e,t,s)=>{if(void 0!==c)c.showAlert(e,t,s);else if(void 0!==s)throw"onOk cannot be set if no global AlertManager has been set";else alert(e)},g=e=>{let t;let s="mx-auto mb-4 h-14 w-14 ",r=null;return c.type===l.Information?t=(0,n.jsx)(i.if7,{className:s+"text-gray-400 dark:text-gray-200"}):c.type===l.Error?t=(0,n.jsx)(i.baL,{className:s+"text-red-400 dark:text-red-200"}):c.type===l.Question?(t=(0,n.jsx)(i.cLc,{className:s+"text-blue-400 dark:text-blue-200"}),r=(0,n.jsx)(o.zx,{outline:!0,onClick:()=>c.hideAlert(),children:"Cancel"})):t=(0,n.jsx)(i.HQH,{className:s+"text-yellow-400 dark:text-yellow-200"}),(0,n.jsxs)(o.u_,{show:e.show,size:"md",popup:!0,children:[(0,n.jsx)(o.u_.Header,{}),(0,n.jsx)(o.u_.Body,{children:(0,n.jsxs)("div",{className:"text-center",children:[t,(0,n.jsx)("h3",{className:"mb-5 overflow-hidden text-lg font-normal text-gray-500 dark:text-gray-400",children:c.message}),(0,n.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,n.jsx)(o.zx,{onClick:()=>c.okClicked(),children:"Ok"}),r]})]})})]})}},9380:function(e,t,s){"use strict";s.d(t,{FO:function(){return c},HG:function(){return d},hV:function(){return a},hu:function(){return o},tu:function(){return h}});var r=s(9116);class l{constructor(e){this.log=(e,t)=>{this.log_messages(e,[t])},this.log_messages=(e,t)=>{this.host.post("log",{level:e,messages:t}).catch(e=>{console.error(e)})},this.host=e}}let n=null,o=e=>{n=new l(e)},i=(e,t,s)=>{let r=s?console.error:console.log,l=d(t);if(null===n)r("NO LOGGER: ".concat(e," - ").concat(l));else{r("".concat(e," - ").concat(l));let t=[l];if(s){let e=Error().stack;void 0!==e&&(t=[...t,...e.split("\n")])}n.log_messages(e,t)}},a=e=>{i("info",e)},c=e=>{i("warning",e),(0,r.av)(e)},h=e=>{i("error",e,!0),(0,r.jx)(e)},d=e=>"string"==typeof e?e:e instanceof Error?e.message:JSON.stringify(e)}},function(e){e.O(0,[556,935,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);