(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(4904)}])},7498:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});var l=s(5893),r=s(7294),o=s(9380),n=s(5697);class i{constructor(e,t){if(this.socket=void 0,this.open=!1,this.listening=!1,this.onMessage=void 0,this.addListeners=()=>{if(void 0!==this.socket&&!this.listening){this.listening=!0;let e=this;this.socket.addEventListener("open",t=>{console.log("open websocket event"),void 0!==e.socket&&e.socket.send("Hello Server!"),e.open=!0}),this.socket.addEventListener("message",function(t){e.onReceive(t).catch(e=>(0,o.hV)("onReceive exception: ".concat(e)))})}},this.close=(e,t)=>{void 0!==this.socket&&(this.socket.close(e,t),this.socket=void 0,this.open=!1,this.listening=!1)},this.send=e=>{void 0!==this.socket&&this.open&&this.socket.send(e)},this.onReceive=async e=>{if(void 0!==this.socket&&this.open&&void 0!==this.onMessage){if(e.data instanceof n.string)(0,o.hV)(e.data);else{let t=await new Response(e.data).text();(0,o.hV)("onReceive: ".concat(t));let s=JSON.parse(t);this.onMessage(s)}}},this.isReady=()=>void 0!==this.socket&&this.open,i._instance)return i._instance;i._instance=this,i.socketBuilder=e,this.onMessage=t,this.socket=e(),this.addListeners()}}let c=e=>{let[t,s]=(0,r.useState)(""),n=(0,r.useRef)(null);(0,r.useEffect)(()=>{new i(()=>new WebSocket("ws://".concat(e.host.getHost(),"/ws")),t=>{if(void 0!==t.Play){let l="http://".concat(e.host.getHost()).concat(t.Play.url);s(l)}else if(void 0!==t.Seek&&null!==n){let e=n.current;e.currentTime=e.currentTime+t.Seek.interval}else if(void 0!==t.TogglePause&&null!==n){let e=n.current;e.paused?e.play().catch(e=>{(0,o.FO)(e.message)}):e.pause()}})},[e.host]);let c=e=>{let t=e.currentTarget;t.requestFullscreen().then(e=>(0,o.hV)("requestFullscreen: ".concat(e))).catch(e=>(0,o.hV)("failed: ".concat(e))),t.className="w-full"},a=e=>{(0,o.hV)("getNextVideo called")};return""!=t?(0,l.jsx)("div",{className:"bg-black h-screen w-screen",children:(0,l.jsx)("video",{className:"h-screen m-auto",onLoadedMetadata:e=>c(e),onEnded:e=>a(e),style:{objectFit:"contain"},id:"video",autoPlay:!0,controls:!0,muted:!1,playsInline:!1,src:t,ref:n})}):(0,l.jsx)("p",{children:"Waiting for video to be selected"})};var a=c},4904:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return V}});var l,r,o=s(5893),n=s(7498),i=s(9380),c=s(7294),a=s(765);class d{constructor(e,t){this.remote_address="",this.message=e,void 0!==t&&(this.remote_address=t)}}class h{constructor(){this.collection="",this.parent_collection="",this.child_collections=[],this.videos=[],this.errors=[]}}let u="text-sm font-medium text-gray-900 border border-gray-200 rounded-lg dark:bg-gray-700 dark:border-gray-600 dark:text-white",x="w-full px-4 py-2 border-gray-200 dark:border-gray-600 overflow-hidden",m=e=>{let t=e=>{let t=x;return e||(t+=" border-b"),t},s=e.entry.child_collections.length-1,l=e.entry.videos.length-1,r=(()=>{let s=t(!1),l=e.entry.parent_collection;return""===e.entry.collection?(0,o.jsx)(o.Fragment,{}):(0,o.jsxs)("li",{className:s,onClick:()=>e.setCurrentCollection(l),children:["<-"," Back"]},"0")})(),n=e.entry.child_collections.map((r,n)=>{let i=t(n==s&&l<0);return(0,o.jsx)("li",{className:i,onClick:()=>e.setCurrentCollection(r),children:r},r)}),i=e.entry.videos.map((s,r)=>{let n=t(r==l)+" text-gray-600";return(0,o.jsx)("li",{className:n,onClick:()=>{e.playVideo(s),console.log(s)},children:s},s)});return(0,o.jsxs)("ul",{className:u,children:[r,n,i]})},g=e=>{let[t,s]=(0,c.useState)(new h),[l,r]=(0,c.useState)("");return(0,c.useEffect)(()=>{e.videoPlayer.fetchCollection().then(e=>e.json()).then(e=>{s(e),r(e.parent_collection)}).catch(e=>{console.log(e),alert(e)})},[e.videoPlayer.getCurrentCollection,e.videoPlayer]),(0,o.jsx)("div",{className:"flex min-h-full flex-col items-center justify-center p-0",children:(0,o.jsx)("main",{className:"flex w-full flex-1 flex-col items-left justify-left",children:(0,o.jsx)(m,{entry:t,setCurrentCollection:e.videoPlayer.setCurrentCollection,playVideo:e.videoPlayer.playVideo})})})},f=e=>{let t=t=>{let s=document.getElementById("search-term");null!==s&&e.doSearch(s.value),t.preventDefault()};return(0,o.jsxs)("form",{className:"flex items-center",onSubmit:e=>t(e),children:[(0,o.jsx)("label",{htmlFor:"simple-search",className:"sr-only",children:"Search"}),(0,o.jsxs)("div",{className:"relative w-full",children:[(0,o.jsx)("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:(0,o.jsx)("svg",{"aria-hidden":"true",className:"w-5 h-5 text-gray-500 dark:text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z",clipRule:"evenodd"})})}),(0,o.jsx)("input",{type:"text",id:"search-term",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full pl-10 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search",required:!0})]}),(0,o.jsxs)("button",{type:"submit",className:"p-2.5 ml-2 text-sm font-medium text-white bg-blue-700 rounded-lg border border-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800",children:[(0,o.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,o.jsx)("span",{className:"sr-only",children:"Search"})]})]})},p=u+" mt-4",k=e=>{let t=e.results.map((t,s,l)=>{let r=x;return s!=l.length-1&&(r+=" border-b"),(0,o.jsxs)("li",{className:r,onClick:s=>e.onItemClick(t),children:[(0,o.jsx)("p",{children:t.title}),(0,o.jsx)("p",{className:"text-gray-600 text-xs",children:t.description})]},"search:"+s)});return 0==e.results.length?(0,o.jsx)("p",{className:"px-1 py-2",children:"No results"}):(0,o.jsx)("ul",{className:p,children:t})};class j{query(e,t){this.host.get(this.url+e).then(e=>e.json()).then(e=>{null!==e.results?t(e.results):null!==e.error&&alert(e.error)}).catch(e=>{(0,i.tu)(e),alert(e)})}constructor(e,t){this.host=e,this.url=t}}class v extends j{constructor(e){super(e,"search/pirate?q=")}}class y{list(e){this.host.get("downloads/list").then(e=>e.json()).then(t=>{null!==t.results?e(t.results):null!==t.error&&(0,i.FO)(t.error)}).catch(e=>{(0,i.tu)(e)})}add(e){this.host.post("downloads/add",{link:e}).catch(e=>{(0,i.tu)(e),alert(e)})}delete(e){this.host.delete("downloads/delete/"+e).catch(e=>{(0,i.tu)(e),alert(e)})}constructor(e){this.host=e}}let w=e=>{let[t,s]=(0,c.useState)([]),l=t=>{let s=new y(e.host);s.add(t.link)},r=t=>{new v(e.host).query(t,s)};return(0,o.jsxs)("div",{className:"p-0",children:[(0,o.jsx)(f,{doSearch:r}),(0,o.jsx)(k,{results:t,onItemClick:l})]})},b=e=>{let[t,s]=(0,c.useState)([]);(0,c.useEffect)(()=>{if(e.isActive){let t=new y(e.host);t.list(s);let l=setInterval(()=>{t.list(s)},2e3);return()=>clearInterval(l)}},[e.isActive,e.host]);let l=e=>{console.log("onItemClick: ".concat(e))};return(0,o.jsx)("div",{className:"p-0",children:(0,o.jsx)(C,{results:t,onItemClick:l})})},C=e=>{let t=(e,t)=>{console.log("onItemClick: ".concat(e,", ").concat(t))},s=e.results.map((e,s,l)=>{let r=x;return s!=l.length-1&&(r+=" border-b"),(0,o.jsxs)("li",{className:r,onClick:s=>t(e,s),children:[(0,o.jsx)("p",{children:e.name}),(0,o.jsxs)("p",{className:"text-gray-600 text-xs",children:["Size: ",e.downloadedSize,"/",e.totalSize,"\xa0 Eta: ",e.eta," secs (",(100*e.percentDone).toFixed(2),"%)\xa0"]}),(0,o.jsxs)("p",{className:"text-gray-600 text-xs",children:["Rate: ",e.rateDownload,"/",e.rateUpload,"\xa0 Peers: ",e.peersConnected," (",e.peersSendingToUs,"/",e.peersGettingFromUs,")"]})]},"search:"+s)});return 0==e.results.length?(0,o.jsx)("p",{className:"px-1 py-2",children:"No results"}):(0,o.jsx)("ul",{className:u,children:s})};var N=s(3854);let S=e=>(0,o.jsx)("button",{type:"button",className:"bg-white border rounded-full","aria-label":"Rewind 10 seconds",onClick:()=>e.onClick(),children:(0,o.jsx)("svg",{width:"72px",viewBox:"-6 -6 36 36",children:e.children})}),_=e=>{let t=e.player;return(0,o.jsxs)("footer",{className:"flex h-28 w-full items-center justify-center border-t bg-gray-50",children:[(0,o.jsx)("div",{className:"flex-auto flex items-center justify-evenly",children:(0,o.jsxs)(S,{ariaLabel:"Rewind 10 seconds",onClick:()=>t.seek(-15),children:[(0,o.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",fillOpacity:"0.0",d:"M6.492 16.95c2.861 2.733 7.5 2.733 10.362 0 2.861-2.734 2.861-7.166 0-9.9-2.862-2.733-7.501-2.733-10.362 0A7.096 7.096 0 0 0 5.5 8.226",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M5 5v3.111c0 .491.398.889.889.889H9",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})}),(0,o.jsx)("button",{type:"button",onClick:()=>t.togglePause(),className:"bg-white text-slate-900 dark:bg-slate-100 dark:text-slate-700 flex-none -my-2 mx-auto w-20 h-20 rounded-full ring-1 ring-slate-900/5 shadow-md flex items-center justify-center","aria-label":"Pause",children:(0,o.jsxs)("svg",{width:"30",height:"32",fill:"currentColor",children:[(0,o.jsx)("rect",{x:"6",y:"4",width:"4",height:"24",rx:"2"}),(0,o.jsx)("rect",{x:"20",y:"4",width:"4",height:"24",rx:"2"})]})}),(0,o.jsx)("div",{className:"flex-auto flex items-center justify-evenly",children:(0,o.jsxs)(S,{ariaLabel:"Skip 10 seconds",onClick:()=>t.seek(15),children:[(0,o.jsx)("path",{fillOpacity:"0.0",d:"M17.509 16.95c-2.862 2.733-7.501 2.733-10.363 0-2.861-2.734-2.861-7.166 0-9.9 2.862-2.733 7.501-2.733 10.363 0 .38.365.711.759.991 1.176",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,o.jsx)("path",{d:"M19 5v3.111c0 .491-.398.889-.889.889H15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})};class E{constructor(e,t,s,l){this.setCurrentCollection=e=>{this.setCurrentCollectionHook(e)},this.getCurrentCollection=()=>this.currentCollection,this.playVideo=e=>{let t={remote_address:this.remote_address,collection:this.currentCollection,video:e};this.post("remote-play",t)},this.seek=e=>{let t=new d({Seek:{interval:e}});this.post("remote-control",t)},this.togglePause=()=>{let e=new d({TogglePause:"ok"});this.post("remote-control",e)},this.post=(e,t)=>{this.host.post(e,t).then(e=>e.json()).then(e=>{console.log(e)}).catch(e=>{console.error(e),alert(e)})},this.fetchCollection=()=>{let e=this.currentCollection?"videos/"+this.currentCollection:"collections";return this.host.get(e)},this.currentCollection=e,this.host=s,this.remote_address=l,this.setCurrentCollectionHook=t}}let L=e=>{let[t,s]=(0,c.useState)(""),[l,r]=(0,c.useState)(0),n=new E(t,s,e.host,""),i=(()=>{switch(l){case 1:return(0,o.jsx)(w,{host:e.host});case 2:return(0,o.jsx)(b,{host:e.host,isActive:!0});default:return(0,o.jsx)(g,{host:e.host,videoPlayer:n})}})();return(0,o.jsxs)("div",{className:"flex flex-col h-screen justify-between",children:[(0,o.jsxs)(a.zx.Group,{className:"p-1 w-full",children:[(0,o.jsxs)(a.zx,{color:"gray",className:"w-full",onClick:()=>r(0),children:[(0,o.jsx)(N.$In,{className:"mr-3 h-4 w-4"})," ","Video"]}),(0,o.jsxs)(a.zx,{color:"gray",className:"w-full",onClick:()=>r(1),children:[(0,o.jsx)(N.G4C,{className:"mr-3 h-4 w-4"})," ","Search"]}),(0,o.jsxs)(a.zx,{color:"gray",className:"w-full",onClick:()=>r(2),children:[(0,o.jsx)(N.EKd,{className:"mr-3 h-4 w-4"})," ","Download"]})]}),(0,o.jsx)("div",{className:"mb-auto p-1 overflow-y-auto",children:i}),(0,o.jsx)(_,{player:n})]})},R=new class{constructor(e){this.getHost=()=>this.host,this.get=async e=>fetch(this.makeUrl(e)),this.post=async(e,t)=>{let s={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}};return fetch(this.makeUrl(e),s)},this.delete=async e=>fetch(this.makeUrl(e),{method:"DELETE"}),this.makeUrl=e=>"http://".concat(this.host,"/").concat(e),this.host=e}}("coco.abamaxa.com");(0,i.hu)(R),(l=r||(r={}))[l.Unknown=1]="Unknown",l[l.Video=2]="Video",l[l.Remote=3]="Remote";let P=()=>{let[e,t]=(0,c.useState)(r.Unknown);return((0,c.useEffect)(()=>{let e=window.navigator.userAgent;e.includes("SMART-TV")||e.includes("Firefox/110")?t(r.Video):t(r.Remote)},[]),e==r.Video)?(0,o.jsx)(n.default,{host:R}):e==r.Remote?(0,o.jsx)(L,{host:R}):(0,o.jsx)("p",{children:"Loading..."})};var V=P},9380:function(e,t,s){"use strict";s.d(t,{FO:function(){return a},hV:function(){return c},hu:function(){return n},tu:function(){return d}});let l="error";class r{constructor(e){this.log=(e,t)=>{this.log_messages(e,[t])},this.log_messages=(e,t)=>{this.host.post("log",{level:e,messages:t}).catch(e=>{console.error(e)})},this.host=e}}let o=null,n=e=>{o=new r(e)},i=(e,t)=>{let s=e===l?console.error:console.log;null===o?s("NO LOGGER: ".concat(e," - ").concat(t)):(s("".concat(e," - ").concat(t)),o.log(e,t))},c=e=>{i("info",e)},a=e=>{i("warning",e),alert(e)},d=e=>{let t=Error().stack,s=JSON.stringify(e);if(void 0===t||null==o)i(l,e);else{let e=t.split("\n");o.log_messages(l,[s,...e])}alert(e)}}},function(e){e.O(0,[556,935,774,888,179],function(){return e(e.s=8312)}),_N_E=e.O()}]);